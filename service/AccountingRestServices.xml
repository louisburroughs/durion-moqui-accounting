<?xml version="1.0" encoding="UTF-8"?>
<services xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/service-definition-3.xsd">

    <!-- ============================================ -->
    <!-- GL ACCOUNT (CHART OF ACCOUNTS) SERVICES -->
    <!-- ============================================ -->

    <service verb="list" noun="GLAccounts" type="rest" auth="always">
        <description>List GL accounts with pagination and filtering</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="page" type="Integer" default-value="0"/>
            <parameter name="pageSize" type="Integer" default-value="20"/>
            <parameter name="status"/>
            <parameter name="accountType"/>
            <parameter name="sort" default-value="-createdAt"/>
        </in-parameters>
        <out-parameters>
            <parameter name="glAccounts" type="List"/>
            <parameter name="totalElements" type="Long"/>
            <parameter name="totalPages" type="Integer"/>
            <parameter name="currentPage" type="Integer"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/gl-accounts"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="get" noun="GLAccount" type="rest" auth="always">
        <description>Get a specific GL account by ID</description>
        <in-parameters>
            <parameter name="glAccountId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="glAccount" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/gl-accounts/${glAccountId}"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="create" noun="GLAccount" type="rest" auth="always">
        <description>Create a new GL account (requires accounting:coa:create permission)</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="accountNumber" required="true"/>
            <parameter name="description"/>
            <parameter name="accountType" required="true"/>
            <parameter name="postingCategory"/>
        </in-parameters>
        <out-parameters>
            <parameter name="glAccount" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/gl-accounts"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="update" noun="GLAccount" type="rest" auth="always">
        <description>Update a GL account (DRAFT status only)</description>
        <in-parameters>
            <parameter name="glAccountId" required="true"/>
            <parameter name="description"/>
            <parameter name="accountType"/>
            <parameter name="postingCategory"/>
        </in-parameters>
        <out-parameters>
            <parameter name="glAccount" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/gl-accounts/${glAccountId}"
                method="PUT"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="activate" noun="GLAccount" type="rest" auth="always">
        <description>Activate a GL account (DRAFT → ACTIVE)</description>
        <in-parameters>
            <parameter name="glAccountId" required="true"/>
            <parameter name="effectiveDate" type="Date"/>
        </in-parameters>
        <out-parameters>
            <parameter name="glAccount" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/gl-accounts/${glAccountId}/activate"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="deactivate" noun="GLAccount" type="rest" auth="always">
        <description>Deactivate a GL account (ACTIVE → INACTIVE)</description>
        <in-parameters>
            <parameter name="glAccountId" required="true"/>
            <parameter name="effectiveDate" type="Date"/>
        </in-parameters>
        <out-parameters>
            <parameter name="glAccount" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/gl-accounts/${glAccountId}/deactivate"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="archive" noun="GLAccount" type="rest" auth="always">
        <description>Archive a GL account (requires accounting:coa:deactivate permission)</description>
        <in-parameters>
            <parameter name="glAccountId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="glAccount" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/gl-accounts/${glAccountId}/archive"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="get" noun="GLAccountBalance" type="rest" auth="always">
        <description>Get current balance for a GL account</description>
        <in-parameters>
            <parameter name="glAccountId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="balance" type="BigDecimal"/>
            <parameter name="lastUpdated" type="Timestamp"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/gl-accounts/${glAccountId}/balance"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <!-- ============================================ -->
    <!-- JOURNAL ENTRY SERVICES -->
    <!-- ============================================ -->

    <service verb="list" noun="JournalEntries" type="rest" auth="always">
        <description>List journal entries with pagination and filtering</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="page" type="Integer" default-value="0"/>
            <parameter name="pageSize" type="Integer" default-value="20"/>
            <parameter name="status"/>
            <parameter name="startDate" type="Date"/>
            <parameter name="endDate" type="Date"/>
            <parameter name="sort" default-value="-transactionDate"/>
        </in-parameters>
        <out-parameters>
            <parameter name="journalEntries" type="List"/>
            <parameter name="totalElements" type="Long"/>
            <parameter name="totalPages" type="Integer"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/journal-entries"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="get" noun="JournalEntry" type="rest" auth="always">
        <description>Get a specific journal entry by ID</description>
        <in-parameters>
            <parameter name="journalEntryId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="journalEntry" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/journal-entries/${journalEntryId}"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="create" noun="JournalEntry" type="rest" auth="always">
        <description>Create a new journal entry in DRAFT status (requires accounting:je:create)</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="transactionDate" type="Timestamp" required="true"/>
            <parameter name="description"/>
            <parameter name="memo"/>
            <parameter name="sourceEventId"/>
            <parameter name="lines" type="List" required="true">
                <parameter name="glAccountId" required="true"/>
                <parameter name="debitAmount" type="BigDecimal"/>
                <parameter name="creditAmount" type="BigDecimal"/>
                <parameter name="description"/>
            </parameter>
        </in-parameters>
        <out-parameters>
            <parameter name="journalEntry" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/journal-entries"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="update" noun="JournalEntry" type="rest" auth="always">
        <description>Update a journal entry (DRAFT status only)</description>
        <in-parameters>
            <parameter name="journalEntryId" required="true"/>
            <parameter name="description"/>
            <parameter name="memo"/>
        </in-parameters>
        <out-parameters>
            <parameter name="journalEntry" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/journal-entries/${journalEntryId}"
                method="PUT"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="post" noun="JournalEntry" type="rest" auth="always">
        <description>Post a journal entry to GL (DRAFT → POSTED, immutable thereafter)</description>
        <in-parameters>
            <parameter name="journalEntryId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="journalEntry" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/journal-entries/${journalEntryId}/post"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="reverse" noun="JournalEntry" type="rest" auth="always">
        <description>Reverse a posted journal entry (creates new POSTED entry with inverted debits/credits)</description>
        <in-parameters>
            <parameter name="journalEntryId" required="true"/>
            <parameter name="reversalReason" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="reversalEntry" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/journal-entries/${journalEntryId}/reverse"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <!-- ============================================ -->
    <!-- POSTING RULE SET SERVICES -->
    <!-- ============================================ -->

    <service verb="list" noun="PostingRuleSets" type="rest" auth="always">
        <description>List posting rule sets with pagination</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="page" type="Integer" default-value="0"/>
            <parameter name="pageSize" type="Integer" default-value="20"/>
            <parameter name="status"/>
            <parameter name="sort" default-value="-createdAt"/>
        </in-parameters>
        <out-parameters>
            <parameter name="ruleSets" type="List"/>
            <parameter name="totalElements" type="Long"/>
            <parameter name="totalPages" type="Integer"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/posting-rules"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="get" noun="PostingRuleSet" type="rest" auth="always">
        <description>Get a specific posting rule set by ID</description>
        <in-parameters>
            <parameter name="ruleSetId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="ruleSet" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/posting-rules/${ruleSetId}"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="create" noun="PostingRuleSet" type="rest" auth="always">
        <description>Create a new posting rule set in DRAFT status</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="name" required="true"/>
            <parameter name="description"/>
            <parameter name="rules" type="List" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="ruleSet" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/posting-rules"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="update" noun="PostingRuleSet" type="rest" auth="always">
        <description>Update a posting rule set (DRAFT status only)</description>
        <in-parameters>
            <parameter name="ruleSetId" required="true"/>
            <parameter name="name"/>
            <parameter name="description"/>
            <parameter name="rules" type="List"/>
        </in-parameters>
        <out-parameters>
            <parameter name="ruleSet" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/posting-rules/${ruleSetId}"
                method="PUT"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="publish" noun="PostingRuleSet" type="rest" auth="always">
        <description>Publish a posting rule set (DRAFT → PUBLISHED, immutable)</description>
        <in-parameters>
            <parameter name="ruleSetId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="ruleSet" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/posting-rules/${ruleSetId}/publish"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="archive" noun="PostingRuleSet" type="rest" auth="always">
        <description>Archive a posting rule set (PUBLISHED → ARCHIVED)</description>
        <in-parameters>
            <parameter name="ruleSetId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="ruleSet" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/posting-rules/${ruleSetId}/archive"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="list" noun="PostingRuleVersions" type="rest" auth="always">
        <description>List all versions of a posting rule set by name</description>
        <in-parameters>
            <parameter name="name" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="versions" type="List"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/posting-rules/versions/${name}"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="validate" noun="PostingRuleSet" type="rest" auth="always">
        <description>Validate a posting rule set before publishing</description>
        <in-parameters>
            <parameter name="ruleSetId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="valid" type="Boolean"/>
            <parameter name="errors" type="List"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/posting-rules/${ruleSetId}/validate"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <!-- ============================================ -->
    <!-- GL MAPPING SERVICES -->
    <!-- ============================================ -->

    <service verb="list" noun="GLMappings" type="rest" auth="always">
        <description>List GL mappings with pagination and filtering</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="sourceSystem"/>
            <parameter name="page" type="Integer" default-value="0"/>
            <parameter name="pageSize" type="Integer" default-value="20"/>
            <parameter name="sort" default-value="-createdAt"/>
        </in-parameters>
        <out-parameters>
            <parameter name="mappings" type="List"/>
            <parameter name="totalElements" type="Long"/>
            <parameter name="totalPages" type="Integer"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/mappings"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="get" noun="GLMapping" type="rest" auth="always">
        <description>Get a specific GL mapping by ID</description>
        <in-parameters>
            <parameter name="mappingId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="mapping" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/mappings/${mappingId}"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="create" noun="GLMapping" type="rest" auth="always">
        <description>Create a new GL mapping with overlap validation</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="sourceSystem" required="true"/>
            <parameter name="externalCode" required="true"/>
            <parameter name="glAccountId" required="true"/>
            <parameter name="effectiveStartDate" type="Date" required="true"/>
            <parameter name="effectiveEndDate" type="Date"/>
            <parameter name="dimensions" type="Map"/>
        </in-parameters>
        <out-parameters>
            <parameter name="mapping" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/mappings"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="update" noun="GLMapping" type="rest" auth="always">
        <description>Update a GL mapping</description>
        <in-parameters>
            <parameter name="mappingId" required="true"/>
            <parameter name="glAccountId"/>
            <parameter name="effectiveEndDate" type="Date"/>
            <parameter name="dimensions" type="Map"/>
        </in-parameters>
        <out-parameters>
            <parameter name="mapping" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/mappings/${mappingId}"
                method="PUT"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="resolve" noun="GLMapping" type="rest" auth="always">
        <description>Resolve an external code to a GL account (for testing/validation)</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="sourceSystem" required="true"/>
            <parameter name="externalCode" required="true"/>
            <parameter name="transactionDate" type="Timestamp" required="true"/>
            <parameter name="dimensions" type="Map"/>
        </in-parameters>
        <out-parameters>
            <parameter name="glAccountId"/>
            <parameter name="postingCategory"/>
            <parameter name="dimensions" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/mappings/resolve"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <!-- ============================================ -->
    <!-- EVENT INGESTION SERVICES -->
    <!-- ============================================ -->

    <service verb="submit" noun="AccountingEvent" type="rest" auth="always">
        <description>Submit an accounting event for processing (requires accounting:events:submit)</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="sourceSystem" required="true"/>
            <parameter name="eventType" required="true"/>
            <parameter name="transactionDate" type="Timestamp" required="true"/>
            <parameter name="payload" type="Map" required="true"/>
            <parameter name="dimensions" type="Map"/>
        </in-parameters>
        <out-parameters>
            <parameter name="eventId"/>
            <parameter name="status"/>
            <parameter name="receivedAt" type="Timestamp"/>
            <parameter name="journalEntryId"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/events"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="get" noun="AccountingEvent" type="rest" auth="always">
        <description>Get an accounting event by ID</description>
        <in-parameters>
            <parameter name="eventId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="event" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/events/${eventId}"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="retry" noun="AccountingEvent" type="rest" auth="always">
        <description>Retry processing of a failed accounting event</description>
        <in-parameters>
            <parameter name="eventId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="event" type="Map"/>
            <parameter name="journalEntryId"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/events/${eventId}/retry"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="list" noun="AccountingEvents" type="rest" auth="always">
        <description>List accounting events with pagination and filtering</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="sourceSystem"/>
            <parameter name="status"/>
            <parameter name="page" type="Integer" default-value="0"/>
            <parameter name="pageSize" type="Integer" default-value="20"/>
            <parameter name="sort" default-value="-receivedAt"/>
        </in-parameters>
        <out-parameters>
            <parameter name="events" type="List"/>
            <parameter name="totalElements" type="Long"/>
            <parameter name="totalPages" type="Integer"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/events"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="get" noun="AccountingEventLog" type="rest" auth="always">
        <description>Get processing log for an accounting event</description>
        <in-parameters>
            <parameter name="eventId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="logEntries" type="List"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/events/${eventId}/log"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <!-- ============================================ -->
    <!-- VENDOR BILL / AP SERVICES -->
    <!-- ============================================ -->

    <service verb="list" noun="VendorBills" type="rest" auth="always">
        <description>List vendor bills with pagination and filtering</description>
        <in-parameters>
            <parameter name="organizationId" required="true"/>
            <parameter name="vendorId"/>
            <parameter name="status"/>
            <parameter name="page" type="Integer" default-value="0"/>
            <parameter name="pageSize" type="Integer" default-value="20"/>
            <parameter name="sort" default-value="-receivedDate"/>
        </in-parameters>
        <out-parameters>
            <parameter name="vendorBills" type="List"/>
            <parameter name="totalElements" type="Long"/>
            <parameter name="totalPages" type="Integer"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/vendor-bills"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="get" noun="VendorBill" type="rest" auth="always">
        <description>Get a specific vendor bill with traceability to origin event and journal entries</description>
        <in-parameters>
            <parameter name="vendorBillId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="vendorBill" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/vendor-bills/${vendorBillId}"
                method="GET"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="approve" noun="VendorBill" type="rest" auth="always">
        <description>Approve a vendor bill (requires accounting:ap:approve)</description>
        <in-parameters>
            <parameter name="vendorBillId" required="true"/>
            <parameter name="approvalDate" type="Date"/>
        </in-parameters>
        <out-parameters>
            <parameter name="vendorBill" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/vendor-bills/${vendorBillId}/approve"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="reject" noun="VendorBill" type="rest" auth="always">
        <description>Reject a vendor bill with justification (requires accounting:ap:reject)</description>
        <in-parameters>
            <parameter name="vendorBillId" required="true"/>
            <parameter name="rejectionReason" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="vendorBill" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/vendor-bills/${vendorBillId}/reject"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

    <service verb="pay" noun="VendorBill" type="rest" auth="always">
        <description>Record payment for a vendor bill (requires accounting:ap:pay)</description>
        <in-parameters>
            <parameter name="vendorBillId" required="true"/>
            <parameter name="paymentAmount" type="BigDecimal" required="true"/>
            <parameter name="paymentDate" type="Date" required="true"/>
            <parameter name="paymentMethod"/>
            <parameter name="referenceNumber"/>
        </in-parameters>
        <out-parameters>
            <parameter name="vendorBill" type="Map"/>
        </out-parameters>
        <remote url="http://${pos_api_host:localhost:8080}/v1/accounting/vendor-bills/${vendorBillId}/pay"
                method="POST"
                timeout="30"
                auth-jwt="${ec.user.getContext().get('JWT_TOKEN')}"/>
    </service>

</services>
